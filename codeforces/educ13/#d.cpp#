#include <bits/stdc++.h>
#define MOD 1000000007
using namespace std;
typedef long long unsigned int llu;

llu pown (llu a, llu n){
  llu ret = 1;
  a = a%MOD;
  while (n>0){
    if (n%2 == 1)
      ret = (ret*a)%MOD;
    n = n>>1;
    a = (a*a)%MOD;
  }
  return ret;
}

llu fastExp(llu a, llu b){
  llu x;
  if (b==0) return 1;
  if (b==1) return a;

  if (b%2==0){
    x = fastExp(a,b/2)%MOD;
    return (x*x)%MOD;
  }
  return (a*fastExp(a,b-1))%MOD;
}

llu inv (llu x){
  return fastExp(x,MOD-2);
}

int main ()
{
  llu a, b, n, x, gn, sec, an;

  cin >> a >> b >> n >> x;

  an = pown(a, n);

  gn = ((an%MOD)*(x%MOD))%MOD;

  sec = (((an1-1)%MOD)*(inv(a-1)%MOD))%MOD;
  
  sec = ((sec%MOD)*(b%MOD))%MOD;

  cout << (sec+gn)%MOD << endl;

  return 0;
}
